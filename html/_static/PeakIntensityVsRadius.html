

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Sample Usage &mdash; DocTest 1 documentation</title>
    
    <link rel="stylesheet" href="default.css" type="text/css" />
    <link rel="stylesheet" href="pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="underscore.js"></script>
    <script type="text/javascript" src="doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="DocTest 1 documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">DocTest 1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <p>Integrates SCD peaks with a range of radii, in order to plot graphs of
the integrated intensity vs radius. This can be useful to determine the
correct integration radius for each peak.</p>
<div class="figure">
<img alt="{Integrated peak intensity vs integration radius for 3 SCD peaks}" src="_static\images\PeakIntensityVsRadius_fig.png" />
<p class="caption">{Integrated peak intensity vs integration radius for 3 SCD peaks}</p>
</div>
<p>The algorithm requires a <a class="reference external" href="MDWorkspace">MDWorkspace</a> of SCD data in
reciprocal space; generated by e.g.
<a class="reference external" href="ConvertToDiffractionMDWorkspace">ConvertToDiffractionMDWorkspace</a>.
Also, you will need a <a class="reference external" href="PeaksWorkspace">PeaksWorkspace</a> as the list of
peaks to integrate. This can be generated using
<a class="reference external" href="FindPeaksMD">FindPeaksMD</a>, for example.</p>
<p>The output will be a <a class="reference external" href="Workspace2D">Workspace2D</a> with one spectrum per
peak, where:</p>
<ul class="simple">
<li>X = peak radius</li>
<li>Y/E = integrated intensity and error for the corresponding radius.</li>
<li>Each peak is labeled with a string with &#8220;H K L&#8221;. Use
<a class="reference external" href="IndexPeaks">IndexPeaks</a> to automatically find HKL values for
peaks.</li>
</ul>
<p>This algorithm calls <a class="reference external" href="IntegratePeaksMD">IntegratePeaksMD</a> repeatedly,
with the following parameters filled in:</p>
<ul class="simple">
<li><strong>PeakRadius</strong> = the radius, ranging from RadiusStart to RadiusEnd in
NumSteps steps.</li>
<li><strong>BackgroundInnerRadius</strong> = radius * BackgroundInnerFactor <em>OR</em>
BackgroundInnerRadius</li>
<li><strong>BackgroundOuterRadius</strong> = radius * BackgroundOuterFactor <em>OR</em>
BackgroundOuterRadius</li>
</ul>
<div class="section" id="sample-usage">
<h1>Sample Usage<a class="headerlink" href="#sample-usage" title="Permalink to this headline">Â¶</a></h1>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c"># Load a SCD data set and find the peaks</span>
<span class="n">LoadEventNexus</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">r&#39;TOPAZ_3131_event.nxs&#39;</span><span class="p">,</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;TOPAZ_3131_nxs&#39;</span><span class="p">)</span>
<span class="n">ConvertToDiffractionMDWorkspace</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;TOPAZ_3131_nxs&#39;</span><span class="p">,</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;TOPAZ_3131_md&#39;</span><span class="p">,</span><span class="n">LorentzCorrection</span><span class="o">=</span><span class="s">&#39;1&#39;</span><span class="p">)</span>
<span class="n">FindPeaksMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;TOPAZ_3131_md&#39;</span><span class="p">,</span><span class="n">PeakDistanceThreshold</span><span class="o">=</span><span class="s">&#39;0.15&#39;</span><span class="p">,</span><span class="n">MaxPeaks</span><span class="o">=</span><span class="s">&#39;100&#39;</span><span class="p">,</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;peaks&#39;</span><span class="p">)</span>
<span class="n">FindUBUsingFFT</span><span class="p">(</span><span class="n">PeaksWorkspace</span><span class="o">=</span><span class="s">&#39;peaks&#39;</span><span class="p">,</span><span class="n">MinD</span><span class="o">=</span><span class="s">&#39;2&#39;</span><span class="p">,</span><span class="n">MaxD</span><span class="o">=</span><span class="s">&#39;16&#39;</span><span class="p">)</span>
<span class="n">IndexPeaks</span><span class="p">(</span><span class="n">PeaksWorkspace</span><span class="o">=</span><span class="s">&#39;peaks&#39;</span><span class="p">)</span>

<span class="c"># Run the PeakIntensityVsRadius algorithm, where the background shell scales with the PeakRadius</span>
<span class="n">PeakIntensityVsRadius</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;TOPAZ_3131_md&#39;</span><span class="p">,</span><span class="n">PeaksWorkspace</span><span class="o">=</span><span class="s">&#39;peaks&#39;</span><span class="p">,</span>
    <span class="n">RadiusStart</span><span class="o">=</span><span class="mf">0.00</span><span class="p">,</span> <span class="n">RadiusEnd</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">NumSteps</span><span class="o">=</span><span class="mi">51</span><span class="p">,</span>
    <span class="n">BackgroundInnerFactor</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span><span class="n">BackgroundOuterFactor</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;peak_vs_rad&#39;</span><span class="p">)</span>

<span class="c"># Run the PeakIntensityVsRadius algorithm, with fixed background shell radius</span>
<span class="n">PeakIntensityVsRadius</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;TOPAZ_3131_md&#39;</span><span class="p">,</span><span class="n">PeaksWorkspace</span><span class="o">=</span><span class="s">&#39;peaks&#39;</span><span class="p">,</span>
    <span class="n">RadiusStart</span><span class="o">=</span><span class="mf">0.00</span><span class="p">,</span> <span class="n">RadiusEnd</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">NumSteps</span><span class="o">=</span><span class="mi">51</span><span class="p">,</span>
    <span class="n">BackgroundInnerRadius</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span><span class="n">BackgroundOuterRadius</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;peak_vs_rad_fixed&#39;</span><span class="p">)</span>

<span class="c"># Plot a few of the peaks</span>
<span class="n">plotSpectrum</span><span class="p">(</span><span class="s">&#39;peak_vs_rad&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">error_bars</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/_static/PeakIntensityVsRadius.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">DocTest 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, James.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>