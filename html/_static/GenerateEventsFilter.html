

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Workspace to store event splitters &mdash; DocTest 1 documentation</title>
    
    <link rel="stylesheet" href="default.css" type="text/css" />
    <link rel="stylesheet" href="pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="underscore.js"></script>
    <script type="text/javascript" src="doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="DocTest 1 documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">DocTest 1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <p>This algorithm is able to generate event splitters according to user&#8217;s
requirement for filtering events. The generated time splitters are
stored either in a <a class="reference external" href="SplittersWorkspace">SplittersWorkspace</a> or a
<a class="reference external" href="MatrixWorkspace">MatrixWorkspace</a>. Both of them will be used by
algorithm <a class="reference external" href="FilterEvents">FilterEvents</a> to filter events from an
<a class="reference external" href="EventWorkspace">EventWorkspace</a>.</p>
<p>This algorithm is designed as a general-purposed event splitter
generator. Combined with <a class="reference external" href="FilterEvents">FilterEvents</a>, it will
replace</p>
<ul class="simple">
<li><a class="reference external" href="FilterByTime">FilterByTime</a></li>
<li><a class="reference external" href="FilterByLogValue">FilterByLogValue</a></li>
</ul>
<p>Moreover, the time resolution of these two algorithms is microseconds,
i.e., the wall time of an (neutron) event. While the original
<a class="reference external" href="FilterByTime">FilterByTime</a> and
<a class="reference external" href="FilterByLogValue">FilterByLogValue</a> are of the resolution of pulse
time. It is also enhanced to process the fast frequency sample logs,
which can be even faster than chopper frequencies.</p>
<div class="section" id="workspace-to-store-event-splitters">
<h1>Workspace to store event splitters<a class="headerlink" href="#workspace-to-store-event-splitters" title="Permalink to this headline">¶</a></h1>
<p>An event splitter used in Mantid contains start time, stop time and
target workspace. Any data structure that has the above 3 properties can
serve as event splitter. There are 2 types of output workspaces storing
event splitters that are supported by this algorithm.</p>
<ul class="simple">
<li><a class="reference external" href="SplittersWorkspace">SplittersWorkspace</a>: It is a
<a class="reference external" href="TableWorskpace">TableWorskpace</a> that has 3 columns for start
time, stop time and target workspace for events within start time and
stop time. This type of workspace is appropriate for the case that
the amount of generated event splitters are not huge;</li>
<li><a class="reference external" href="MatrixWorkspace">MatrixWorkspace</a>: It uses X-axis to store time
stamp in total nanoseconds and Y-axis to store target workspace. For
example, x_i, x_i+1 and y_i construct an event filter as start
time is x_i, stop time is x_i+i, and target workspace is y_i-th
workspace. If y_i is less than 0, then it means that all events
between time x_i and x_i+1 will be discarded. This type of
workspace is appropriate for the case that the amount of generated
event splitters are huge, because processing a
<a class="reference external" href="MatrixWorkspace">MatrixWorkspace</a> is way faster than a
<a class="reference external" href="TableWorkspace">TableWorkspace</a> in Mantid.</li>
</ul>
</div>
<div class="section" id="functionalities">
<h1>Functionalities<a class="headerlink" href="#functionalities" title="Permalink to this headline">¶</a></h1>
<p>Here are the types of event filters (i.e.,
<a class="reference external" href="SplittersWorkspace">SplittersWorkspace</a>) that can be generated by
this algorithm:</p>
<ul class="simple">
<li>A filter for one time interval.</li>
<li>A series of filters for multiple continuous time intervals, which
have the same length of period. Each of them has an individual
workspace index associated. These workspace indices are incremented
by 1 from 0 along with their orders in time.</li>
<li>A filter containing one or multiple time intervals according to a
specified log value. Any log value of the time that falls into the
selected time intervals is equal or within the tolerance of a user
specified value.</li>
<li>A series filters containing one or multiple time intervals according
to specified log values incremented by a constant value. Any log
value of the time that falls into the selected time intervals is
equal or within the tolerance of the log value as v_0 + n x delta_v
+/- tolerance_v.</li>
</ul>
<div class="section" id="parameter-centre">
<h2>Parameter: <em>Centre</em><a class="headerlink" href="#parameter-centre" title="Permalink to this headline">¶</a></h2>
<p>The input Boolean parameter <em>centre</em> is for filtering by log value(s).
If option <em>centre</em> is taken, then for each interval,</p>
<ul class="simple">
<li>starting time = log_time - tolerance_time;</li>
<li>stopping time = log_time - tolerance_time;</li>
</ul>
<p>It is a shift to left.</p>
</div>
<div class="section" id="parameter-logvaluetolerance-and-logvalueinterval">
<h2>Parameter: <em>LogValueTolerance</em> and <em>LogValueInterval</em><a class="headerlink" href="#parameter-logvaluetolerance-and-logvalueinterval" title="Permalink to this headline">¶</a></h2>
<p>These two parameters are used to determine the log value intervals for
filtering events.</p>
<p>Let user-specified minimum log value to be &#8216;min&#8217;, LogValueTolerance to
be &#8216;tol&#8217;, and LogValueInterval to be &#8216;delta&#8217;, then the log value
intervals are (min-tol, min-tol+delta), (min-tol+delta, min-tol+2delta),
...</p>
<p>The default value of LogValueTolerance is LogValueInterval devided by 2.</p>
</div>
<div class="section" id="about-how-log-value-is-recorded">
<h2>About how log value is recorded<a class="headerlink" href="#about-how-log-value-is-recorded" title="Permalink to this headline">¶</a></h2>
<p>SNS DAS records log values upon its changing. The frequency of log
sampling is significantly faster than change of the log, i.e., sample
environment devices. Therefore, it is reasonable to assume that all the
log value changes as step functions.</p>
<p>The option to do interpolation is not supported at this moment.</p>
</div>
</div>
<div class="section" id="comparison-to-filterbylogvalue">
<h1>Comparison to FilterByLogValue<a class="headerlink" href="#comparison-to-filterbylogvalue" title="Permalink to this headline">¶</a></h1>
<p>1. If the first log value is within the specified range and the first
log time is after run star time, FilterByLogValue assumes that the log
value before the first recorded log time is also within range, and thus
the first splitter starts from the run star time, while
GenerateEventFilter tends to be more conservative, and thus the first
splitter will start from the first log time.</p>
<p>2. FilterByLogValue only filters events at the resolution of pulse time,
while <a class="reference external" href="GenerateEventsFilter">GenerateEventsFilter</a> can improve the
resolution to 1 micro second.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Workspace to store event splitters</a></li>
<li><a class="reference internal" href="#functionalities">Functionalities</a><ul>
<li><a class="reference internal" href="#parameter-centre">Parameter: <em>Centre</em></a></li>
<li><a class="reference internal" href="#parameter-logvaluetolerance-and-logvalueinterval">Parameter: <em>LogValueTolerance</em> and <em>LogValueInterval</em></a></li>
<li><a class="reference internal" href="#about-how-log-value-is-recorded">About how log value is recorded</a></li>
</ul>
</li>
<li><a class="reference internal" href="#comparison-to-filterbylogvalue">Comparison to FilterByLogValue</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/_static/GenerateEventsFilter.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">DocTest 1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, James.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>